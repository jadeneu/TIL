# 목차
* [일대일 관계](#일대일-관계)
* [일대다 관계](#일대다-관계)
* [다대다 관계](#다대다-관계)
  + [예시](#--예시)
  + [TIP) 테이블간의 관계를 이해하기가 어렵다면](#tip-테이블간의-관계를-이해하기가-어렵다면)
* [대표키와 외래키](#대표키와-외래키)
* [출처](#출처)

<br><br>


관계형 데이터베이스( MySQL, Oracle, MS-SQL, SQLite 등 )는 엔티티(객체)끼리 관계를 맺을 수 있어서 관계형 DB라는 이름이 붙었다. <br>
관계는 두 엔티티가 서로 관련이 있을 때를 말하는데, 다음과 같은 관계를 맺을 수 있다.<br>
* 일대일 ( 1:1 )
* 일대다 ( 1:N )
* 다대다 ( N:M )
<br><br>

### 일대일 관계
1 : 1 관계란 어느 객체 쪽에서 상대 객체를 보더라도 반드시 단 하나씩 관계를 가지는 것을 말한다.
<br><br>

### 일대다 관계
1 : M 관계는 한 쪽 객체가 관계를 맺은 객체 쪽의 여러 객체를 가질 수 있는 것을 의미한다.<br>
이 관계는 매우 흔한 방식이며, 실제 DB를 설계할 때 자주 쓰이는 방식이다.<br>
<br><br>

### 다대다 관계
N : M 관계는 관계를 가진 양쪽 객체 모두에서 1 : M 관계가 존재할 때 나타나는 모습이다.<br>
즉, 서로가 서로를 1:N 관계로 보고 있는 것이다.<br>

M:N관계에서는 두 테이블만 만들어놓으면 정규화에 문제가 생긴다.<br>
그래서 M:N사이에 하나의 테이블을 더 만들어서 

**[M] : [N] => [1] : [M] : [1]** 로 만들어준다.
<br><br>

#### - 예시
학생과 수업으로 설명하면<br>
**한명의 학생**은 **여러 수업**을 듣는다.<br>
**하나의 수업**은 **여러 학생**을 수용한다.

철수 - 수학, 영어, 국어<br>
철수, 영희, 미자 - 국어

위의 다대다 관계를 중간에 테이블을 추가하여 바꾼다.
```
철수 - 학생코드

        학생코드 - 수업코드

                    수업코드 - 수업
``` 
그럼 데이터는 이렇게 바뀐다.
```
철수 - 1          1 - a          a - 수학      

영희 - 2          1 - b          b - 영어

미자 - 3          1 - c          c - 국어

                  2 - c

                  3 - c
```
이것을 자연 조인하면 
```
철수 - 1 - a - 수학

철수 - 1 - b - 영어

철수 - 1 - c - 국어

영희 - 2 - c - 국어

미자 - 3 - c - 국어
``` 
중간의 학생코드-수업코드 테이블만 빠지면 원래 하려던 다대다 관계가 된다.


#### TIP) 테이블간의 관계를 이해하기가 어렵다면
1. 관계를 생각 할 때 테이블로 생각하지 말고, '한 행'을 기준으로 생각한다. 그러므로 테이블 명도 '학생 목록', '수업 목록'이 아닌, 한 행을 대표할 수 있는 이름인 '학생', '수업'으로 해야 한다.

2. 논리적으로 생각할 땐, 연결(매핑) 테이블은 생각하지 않는다.<br>
-철수의 학생 코드는 학생_수업 테이블에 여러개 존재한다. (X)<br>
-철수는 국어, 영어, 수학 수업을 수강한다.(O)

3. 항상 일대다(1:N) 기준으로 생각한다. 다대일(N:1)보다 직관적으로 이해하기 쉽다.<br>
-철수가 여러 수업을 수강한다.(O)<br>
-국어, 영어, 수학은 철수를 수용 한다.(X)
<br><br>

### 대표키와 외래키
table을 각 엔티티를 식별할 수 있는 대표 키( PK, Primary key )가 존재한다.<br>
대표키는 중복되지 않는 값이다. ( unique )

예를 들어, 주민 번호는 대한민국 국민들을 식별할 수 있는 대표 키가 된다.<br>
주민등록증이 같은 사람은 있을 수 없기 때문에, 대표 키로서 기능을 할 수 있다.

테이블간의 관계를 맺을 때, 흔히 대표키를 이용하여 관계를 맺는다.<br>
예를 들어, 1 : N 관계의 대표적인 예로 게시글과 댓글을 생각해보자.<br>
게시글은 여러 댓글들을 가지고 있으며, 댓글은 어떤 한 게시글에만 속해 있다.<br>
따라서 게시글과 댓글은 1:N 관계라 할 수 있다.

게시글은 자신이 어떤 댓글들을 가지고 있는지 어떻게 알 수 있을까?<br>
댓글 테이블을 설계할 때 컬럼에는 아래와 같은 정보들이 있을 수 있다.
* 댓글 아이디 ( PK )
* 작성자 명
* 내용
* 작성일

여기서 어떤 게시글에 속해 있는지에 대한 정보가 필요하므로 하나의 컬럼이 더 필요한데, 이를 외래키( FK, Foreign key )라 한다.
* 게시글 아이디 ( FK )

여기서 게시글 아이디는 게시글 테이블의 대표 키이며, 이를 댓글 테이블의 외래키로 지정하여 관계를 맺을 수 있다.

즉, 게시글은 어떤 댓글들이 자신의 댓글들인지 알 필요 없고, 댓글만 자신이 어떤 게시글에 속하는지만 알면 1:N 관계를 성립할 수 있다.<br>
그 역할이 외래키인 것이다.

그렇다면 N : M 관계에서는 어떨까?<br>
여기서는 서로가 서로를 1 : M  ,  1 : N  관계로 갖고 있기 때문에, 서로의 PK가 자신의 외래키 컬럼으로 갖고 있으면 된다.<br>
일반적으로 N : M 관계는 두 테이블의 대표키를 컬럼으로 갖는 또 다른 테이블을 생성해서 관리한다.
<br><br>





---
## 출처
- http://blog.naver.com/PostView.nhn?blogId=nitrogehne&logNo=150166090575<br>
[출처] M:N (다대다 관계)|작성자 Ehne

- https://victorydntmd.tistory.com/30

- https://siyoon210.tistory.com/26
























